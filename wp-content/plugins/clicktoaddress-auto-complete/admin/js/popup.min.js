function get_cc_token(e){cc_obj={},cc_obj.callback=e,cc_obj.token="",cc_obj.url="https://account-api.craftyclicks.co.uk/",cc_obj.login_details={},cc_obj.access_tokens=[],cc_obj.make_popup=function(){var e=jQuery('<div id="fetchify-popup"><div class="fetchify-background"><div class="fetchify-content"><div class="fetchify-content-top"><div class="fetchify-content-top-inner"><div class="fetchify-close-button"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 490 490" style="enable-background:new 0 0 490 490;" xml:space="preserve"><g><g><g><path d="M207,182.8c-6.7-6.7-17.6-6.7-24.3,0s-6.7,17.6,0,24.3l38,38l-38,38c-6.7,6.7-6.7,17.6,0,24.3c3.3,3.3,7.7,5,12.1,5 c4.4,0,8.8-1.7,12.1-5l38-38l38,38c3.3,3.3,7.7,5,12.1,5s8.8-1.7,12.1-5c6.7-6.7,6.7-17.6,0-24.3l-38-38l38-38 c6.7-6.7,6.7-17.6,0-24.3s-17.6-6.7-24.3,0l-38,38L207,182.8z"/><path d="M0,245c0,135.1,109.9,245,245,245s245-109.9,245-245S380.1,0,245,0S0,109.9,0,245z M455.7,245 c0,116.2-94.5,210.7-210.7,210.7S34.3,361.2,34.3,245S128.8,34.3,245,34.3S455.7,128.8,455.7,245z"/></g></g></g></svg></div><img src="'+("undefined"!=typeof fetchify_logo_url?fetchify_logo_url:"")+'" alt="Fetchify"></div></div><div class="fetchify-content-bottom"><div class="fetchify-error-display"></div><form class="fetchify-form"><h4>Log in to your Fetchify account</h4><input id="cc-user" placeholder="Email"><input id="cc-password" type="password" placeholder="Password"></input><input class="fetchify-load-button" type="submit" value="Load Tokens"></input></form><div class="fetchify-loading-img" style="display: none;"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve"><rect x="0" y="10" width="4" height="10" fill="#333" opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0s" dur="0.6s" repeatCount="indefinite" /></rect><rect x="8" y="10" width="4" height="10" fill="#333"  opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.15s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.15s" dur="0.6s" repeatCount="indefinite" /></rect><rect x="16" y="10" width="4" height="10" fill="#333"  opacity="0.2"><animate attributeName="opacity" attributeType="XML" values="0.2; 1; .2" begin="0.3s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="height" attributeType="XML" values="10; 20; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" /><animate attributeName="y" attributeType="XML" values="10; 5; 10" begin="0.3s" dur="0.6s" repeatCount="indefinite" /></rect></svg></div><div class="fetchify-result-display" style="display: none"><h4>Select an access token:</h4><table><thead><tr><td>ID</td><td>Token</td><td>Alias</td></tr></thead><tbody></tbody></table></div></div></div></div></div>');jQuery("body").append(e),jQuery(".fetchify-close-button").on("click",function(){cc_obj.close_popup()}),jQuery(".fetchify-load-button").on("click",function(e){e.preventDefault(),cc_obj.loading(),setTimeout(function(){cc_obj.authenticate()},500)})},cc_obj.close_popup=function(){jQuery("#fetchify-popup").remove()},cc_obj.authenticate=function(){cc_obj.login_details.user=jQuery("#cc-user").val(),cc_obj.login_details.password=jQuery("#cc-password").val();var t=new XMLHttpRequest;t.open("GET",cc_obj.url+"access/token",!0),t.setRequestHeader("CRAFTY-CLICKS-APPLICATION-KEY","woocommerce-plugin"),t.setRequestHeader("Authorization","Basic "+btoa(cc_obj.login_details.user+":"+cc_obj.login_details.password)),t.send(),t.onreadystatechange=function(){var e,c;4==t.readyState&&200==t.status?(e=JSON.parse(this.responseText),cc_obj.account_id=e.user_info.account_id,(c=new XMLHttpRequest).open("GET",cc_obj.url+"ws_tokens/get?account_id="+cc_obj.account_id,!0),c.setRequestHeader("CRAFTY-CLICKS-APPLICATION-KEY","woocommerce-plugin"),c.setRequestHeader("Authorization","Basic "+btoa(cc_obj.login_details.user+":"+cc_obj.login_details.password)),c.send(),c.onreadystatechange=function(){if(4==c.readyState&&200==c.status){var e=JSON.parse(this.responseText);if(e.ws_tokens.length){for(var t=0;t<e.ws_tokens.length;t++)!e.ws_tokens[t].deleted&&e.ws_tokens[t].enabled&&(cc_obj.access_tokens[t]={token_id:e.ws_tokens[t].token_id,access_token:e.ws_tokens[t].token,nickname:e.ws_tokens[t].nickname});cc_obj.display_token_list()}else cc_obj.error("No access tokens were found for this account.")}else 4==c.readyState&&200!=c.status&&cc_obj.error("Unable to retrieve access tokens as an error occurred. Please try again.")}):4==t.readyState&&401==t.status?cc_obj.error("There was a problem with the details you provided. Please try again."):4==t.readyState&&200!=t.status&&cc_obj.error("Unable to retrieve access tokens as an error occurred. Please try again.")}},cc_obj.loading=function(){jQuery(".fetchify-form").hide(100),jQuery(".fetchify-error-display").hide(100),jQuery(".fetchify-loading-img").show(100)},cc_obj.display_token_list=function(){if(jQuery(".fetchify-loading-img").hide(100),cc_obj.access_tokens.length){jQuery(".fetchify-error-display").hide(100),jQuery(".fetchify-result-display").show(100);for(var e="",t=0;t<cc_obj.access_tokens.length;t++)void 0!==cc_obj.access_tokens[t]&&(e+='<tr data-token="'+cc_obj.access_tokens[t].access_token+'"><td>'+cc_obj.access_tokens[t].token_id+"</td><td>"+cc_obj.access_tokens[t].access_token+"</td><td>"+cc_obj.access_tokens[t].nickname+"</td></tr>");jQuery(".fetchify-result-display").find("tbody")[0].innerHTML=e,jQuery(".fetchify-result-display").find("tr").each(function(e,t){jQuery(t).on("click",function(){cc_obj.callback(t.getAttribute("data-token")),cc_obj.close_popup()})})}else cc_obj.error("No access tokens were found for this account.")},cc_obj.error=function(e){jQuery(".fetchify-loading-img").hide(100),jQuery(".fetchify-form").show(100),jQuery(".fetchify-error-display").show(100),jQuery(".fetchify-error-display")[0].innerHTML=e},cc_obj.make_popup()}